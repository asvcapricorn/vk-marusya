import{d as g,r as c,g as h,j as f,G as y,o as b,c as _,f as t,a as m,k as w,w as k,l as M,b as C,t as x,m as G,e as p}from"./index-c6GknnOI.js";import{_ as R}from"./MoviesList.vue_vue_type_script_setup_true_lang-Bkw3TivT.js";const S=G+"#icon-chevron",B={class:"movies-by-genre"},E={class:"container"},L={class:"movies-by-genre__wrapper"},N={class:"movies-by-genre__title-text"},V=10,I=g({__name:"MoviesByGenreView",setup(P){const n=f(),a=c([]),l=c(1),o=c(!0),u=async(s=1)=>{if(o.value)try{const e=new URLSearchParams({count:String(15),page:String(s),genre:n.params.genre}),i=await(await C.get(`/movie?${e}`)).data;i.length<V&&(o.value=!1),s===1?a.value=i:a.value.push(...i),l.value=s}catch{throw new Error("movies by genre response was not ok")}},v=()=>{o.value&&u(l.value+1)},d=h(()=>{if(n.params.genre){const s=y[n.params.genre]?.translation||n.params.genre,e=s.charAt(0).toUpperCase(),r=s.slice(1);return e+r}return""});return b(()=>{u(1)}),(s,e)=>{const r=M("RouterLink");return p(),_("main",null,[t("section",B,[t("div",E,[t("div",L,[e[1]||(e[1]=t("h1",{class:"visually-hidden"},"Фильмы по жанрам",-1)),m(r,{class:"movies-by-genre__title",to:"/genres"},{default:k(()=>[e[0]||(e[0]=t("svg",{class:"movies-by-genre__title-icon",width:"40",height:"40","aria-hidden":"true"},[t("use",{"xlink:href":S})],-1)),t("span",N,x(d.value),1)]),_:1,__:[0]}),m(R,{class:"movies-by-genre__list",movies:a.value,cardTop:!1},null,8,["movies"]),o.value?(p(),_("button",{key:0,class:"movies-by-genre__btn btn btn--primary",type:"button",onClick:v}," Показать ещё ")):w("",!0)])])])])}}});export{I as default};
