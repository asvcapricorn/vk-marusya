import{d as g,r as c,g as h,k as f,G as y,o as b,c as _,f as t,a as m,l as w,w as k,m as M,b as C,h as x,t as G,n as R,e as p}from"./index-BXL_6M6R.js";import{_ as S}from"./MoviesList.vue_vue_type_script_setup_true_lang-CX5CS7Vm.js";const B=R+"#icon-chevron",E={class:"movies-by-genre"},L={class:"container"},N={class:"movies-by-genre__wrapper"},V={class:"movies-by-genre__title-text"},A=10,U=g({__name:"MoviesByGenreView",setup(P){const n=f(),r=c([]),l=c(1),a=c(!0),u=async(s=1)=>{if(a.value)try{const e=new URLSearchParams({count:String(15),page:String(s),genre:n.params.genre}),i=await(await C.get(`/movie?${e}`)).data;i.length<A&&(a.value=!1),s===1?r.value=i:r.value.push(...i),l.value=s}catch(e){x(e)}},v=()=>{a.value&&u(l.value+1)},d=h(()=>{if(n.params.genre){const s=y[n.params.genre]?.translation||n.params.genre,e=s.charAt(0).toUpperCase(),o=s.slice(1);return e+o}return""});return b(()=>{u(1)}),(s,e)=>{const o=M("RouterLink");return p(),_("main",null,[t("section",E,[t("div",L,[t("div",N,[e[1]||(e[1]=t("h1",{class:"visually-hidden"},"Фильмы по жанрам",-1)),m(o,{class:"movies-by-genre__title",to:"/genres"},{default:k(()=>[e[0]||(e[0]=t("svg",{class:"movies-by-genre__title-icon",width:"40",height:"40","aria-hidden":"true"},[t("use",{"xlink:href":B})],-1)),t("span",V,G(d.value),1)]),_:1,__:[0]}),m(S,{class:"movies-by-genre__list",movies:r.value,cardTop:!1},null,8,["movies"]),a.value?(p(),_("button",{key:0,class:"movies-by-genre__btn btn btn--primary",type:"button",onClick:v}," Показать ещё ")):w("",!0)])])])])}}});export{U as default};
